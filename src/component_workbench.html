<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AE Component Workbench</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <!-- add new imports here -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Coda&family=Google+Sans+Code:wght@400;500;700&family=Inter:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:wght@400;700&family=Merriweather+Sans:wght@400;700&family=Montserrat:wght@400;700&family=Nunito:wght@400;700&family=Orbitron:wght@400;700&family=Recursive:wght@300..1000&family=Roboto:wght@400;700&family=Source+Sans+Pro:wght@400;600&family=Special+Elite:wght@400;700&family=Work+Sans:wght@400;700&family=Manrope:wght@400;700&family=Space+Grotesk:wght@300..700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* @TODO "work towards eventually having a code creator for each component, but will need the parameters, etc" */
        /* @TODO "add glow to effects" */ 
        
        /* * Base styles and utility classes. 
         * The actual color values are now controlled by a dynamically injected <style> tag via React,
         * but these serve as a fallback.
        */
        :root {
            --font-family-intersans: 'Inter', sans-serif;
            --font-family-recursivesans: 'Recursive', sans-serif;
            --font-family-robotosans: 'Roboto', sans-serif;
            --font-family-manropesans: 'Manrope', sans-serif;
            --font-family-sourcesans: 'Source Sans Pro', sans-serif;
            --font-family-merriweathersans: 'Merriweather Sans', sans-serif;
            --font-family-orbitronsans: 'Orbitrom', sans-serif;
            --font-family-worksans: 'Work Sans', sans-serif;
            --font-family-montserratsans: 'Montserrat', sans-serif;
            --font-family-specialsans: 'Special Elite', sans-serif;
            --font-family-nunitosans: 'Nunito', sans-serif;
            --font-family-spacesans: 'Space Grotesk', sans-serif; 
            --font-family-jetbrainsmono: 'JetBrains Mono', monospace;
            --font-family-codamono: 'Coda', monospace;
            --font-family-googlemono: 'Google Sans Code', monospace;
            --font-family-intermono: 'Inter', monospace;
            --font-family-robotomono: 'Roboto', monospace;
            --font-family: var(--font-family-intersans);

            /* Effects Variables */
            --transition-duration: 300ms;
            --transition-timing-function: ease-in-out;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-glow: 0 0 15px 0px var(--accent-data);
        }
        body {
            font-family: var(--font-family);
            background-color: var(--background-base);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .font-intersans { --font-family: var(--font-family-intersans); }
        .font-recursivesans { --font-family: var(--font-family-recursivesans); }
        .font-robotosans { --font-family: var(--font-family-robotosans); }
        .font-manropesans { --font-family: var(--font-family-manropesans); }
        .font-sourcesans { --font-family: var(--font-family-sourcesans); }
        .font-merriweathersans { --font-family: var(--font-family-merriweathersans); }
        .font-orbitronsans { --font-family: var(--font-family-orbitronsans); }
        .font-worksans { --font-family: var(--font-family-worksans); }
        .font-montserratsans { --font-family: var(--font-family-montserratsans); }
        .font-specialsans { --font-family: var(--font-family-specialsans); }
        .font-nunitosans { --font-family: var(--font-family-nunitosans); }
        .font-spacesans { --font-family: var(--font-family-spacesans); }
        .font-jetbrainsmono { --font-family: var(--font-family-jetbrainsmono); }
        .font-codamono { --font-family: var(--font-family-codamono); }
        .font-googlemono { --font-family: var(--font-family-googlemono); }
        .font-intermono { --font-family: var(--font-family-intermono); }
        .font-robotomono { --font-family: var(--font-family-robotomono); }

        .bg-base { background-color: var(--background-base); }
        .bg-secondary { background-color: var(--background-secondary); }
        .bg-tertiary { background-color: var(--background-tertiary); }
        .bg-button-positive { background-color: var(--button-positive); }
        .bg-button-destructive { background-color: var(--button-destructive); }
        .bg-button-warning { background-color: var(--button-warning); }
        .bg-button-informational { background-color: var(--button-informational); }
        .bg-button-neutral { background-color: var(--button-neutral); }
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-inverted { color: var(--text-inverted); }
        .border-primary { border-color: var(--border-primary); }
        .border-secondary { border-color: var(--border-secondary); }

        /* Effects Utility Classes */
        .transition-all { transition: all var(--transition-duration) var(--transition-timing-function); }
        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow-md { box-shadow: var(--shadow-md); }
        .shadow-lg { box-shadow: var(--shadow-lg); }
        .shadow-glow { box-shadow: var(--shadow-glow); }
        .hover-lift:hover { transform: translateY(-4px); }
        .hover-scale:hover { transform: scale(1.05); }

    </style>
</head>
<body>

    <div id="root"></div>

    <!-- React Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        // --- Theme Presets ---
        const LIGHT_THEME_PRESET = { '--background-base': '#f4f4f5', '--background-secondary': '#e4e4e7cb', '--background-tertiary': '#e0e0e0', '--text-primary': '#111827', '--text-secondary': '#4b5563', '--text-tertiary': '#9ca3af', '--text-inverted': '#ffffff', '--border-primary': '#d4d4d8', '--border-secondary': '#a1a1aa', '--accent-main': '#0284c7', '--accent-secondary': '#475569', '--accent-trigger': '#a78bfa', '--accent-action': '#2dd4bf', '--accent-prompt': '#4ade80', '--accent-logic': '#fb923c', '--accent-human': '#f472b6', '--accent-data': '#60a5fa', '--card-surface': '#ffffff', '--card-node-line': '#525252', '--button-positive': '#059669', '--button-destructive': '#c41c1ca8', '--button-informational': '#0285c7cb', '--button-warning': '#f59e0b', '--button-neutral': '#6782a7', '--button-popover': '#27272a' };
        const DARK_THEME_PRESET = { '--background-base': '#18181b', '--background-secondary': '#27272a', '--background-tertiary': '#3f3f46', '--text-primary': '#f4f4f5', '--text-secondary': '#a1a1aa', '--text-tertiary': '#71717a', '--text-inverted': '#ffffff', '--border-primary': '#3f3f46', '--border-secondary': '#52525b', '--accent-main': '#b91c1c', '--accent-secondary': '#44403c', '--accent-trigger': '#8b5cf6', '--accent-action': '#14b8a6', '--accent-prompt': '#22c55e', '--accent-logic': '#f97316', '--accent-human': '#ec4899', '--accent-data': '#3b82f6', '--card-surface': '#1f1f23', '--card-node-line': '#b91c1c', '--button-positive': '#059669', '--button-destructive': '#c41c1ca8', '--button-informational': '#0285c7cb', '--button-warning': '#f59e0b', '--button-neutral': '#6782a7', '--button-popover': '#27272a' };
        
        
        // --- Icon Component & Custom SVG Definitions ---
        const SVG_PATHS = { save: 'M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z', delete: 'M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z', edit: 'M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z', generate: 'M12 2.69l5.66 5.66-1.41 1.41-4.24-4.24-4.24 4.24-1.41-1.41L12 2.69zm0 18.62l-5.66-5.66 1.41-1.41 4.24 4.24 4.24-4.24 1.41 1.41L12 21.31z', close: 'M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z', undefined: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z' };
        const Icon = ({ name, className, size, color }) => { const path = SVG_PATHS[name] || SVG_PATHS['undefined']; return (<svg className={className} style={{width: size, height: size, color: color}} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d={path}></path></svg>); };
        
        // --- Your Button Component ---
        const ACTION_ICON_MAP = { save: 'save', delete: 'delete', edit: 'edit', generate: 'generate', close: 'close', default: 'undefined' };
        const getButtonStyles = (action) => {
            switch (action) { case 'save': return 'bg-button-positive hover:brightness-125 text-inverted'; case 'delete': return 'bg-button-destructive hover:brightness-125 text-inverted'; case 'print': case 'close': return 'bg-button-informational hover:brightness-125 text-inverted'; case 'edit': case 'generate': return 'bg-button-warning hover:brightness-125 text-primary'; default: return 'bg-button-neutral hover:brightness-125 text-inverted'; }
        };
        const Button = ({ text, action, onClick, ...props }) => { const iconName = ACTION_ICON_MAP[action]; return ( <button onClick={onClick} className={`inline-flex items-center justify-center w-auto h-9 px-4 border border-transparent text-sm font-medium rounded-md shadow-lg transition-all duration-200 ${getButtonStyles(action)}`} {...props} > {iconName && <Icon name={iconName} className={text ? 'mr-2' : ''} size={16} />} {text} </button> ); };
        
        // --- Control Components ---
        const ThemeSwitcher = ({ onThemeChange }) => ( <div className="flex items-center gap-4 bg-secondary p-2 rounded-md border border-primary"> <span className="text-secondary text-sm font-medium">Load Preset:</span> <button onClick={() => onThemeChange('light')} className="text-sm capitalize px-2 py-1 rounded bg-tertiary hover:brightness-110">Light</button> <button onClick={() => onThemeChange('dark')} className="text-sm capitalize px-2 py-1 rounded bg-tertiary hover:brightness-110">Dark</button> </div> );
        const FontSwitcher = ({ currentFont, onFontChange }) => { const fonts = ['intersans', 'recursivesans', 'robotosans', 'manropesans', 'sourcesans', 'merriweathersans', 'orbitronsans', 'worksans', 'montserratsans', 'specialsans', 'nunitosans', 'spacesans', 'jetbrainsmono', 'codamono', 'googlemono', 'intermono', 'robotomono']; return ( <div className="flex flex-wrap gap-4 bg-secondary p-2 rounded-md border border-primary"> <span className="text-secondary text-sm font-medium">Font:</span> {fonts.map(font => ( <label key={font} className="flex items-center gap-2 cursor-pointer text-sm capitalize"> <input type="radio" name="font" value={font} checked={currentFont === font} onChange={() => onFontChange(font)} /> {font} </label> ))} </div> ); };
        
        // --- Live Theme Editor ---
        const LiveThemeEditor = ({ colors, onColorChange }) => {
            const groupedColors = Object.keys(colors).reduce((acc, key) => { const group = key.split('-')[1]; if (!acc[group]) acc[group] = []; acc[group].push(key); return acc; }, {});
            return ( <div className="bg-secondary p-2 rounded-lg border border-primary"> {Object.entries(groupedColors).map(([group, keys]) => ( <div key={group} className="mb-2"> <h4 className="text-sm font-medium mb-2 capitalize pb-1">{group}</h4> <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"> {keys.map(key => ( <div key={key} className="flex items-center justify-between"> <label htmlFor={key} className="text-sm text-secondary truncate pr-2">{key.replace('--', '').replace(/-/g, ' ')}</label> <div className="flex items-center gap-2"> <input type="color" id={key} value={colors[key]} onChange={e => onColorChange(key, e.target.value)} className="w-8 h-8 p-0 border-none rounded cursor-pointer" style={{backgroundColor: 'transparent'}}/> <input type="text" value={colors[key]} onChange={e => onColorChange(key, e.target.value)} className="w-24 bg-tertiary text-primary text-xs rounded p-1 border border-primary"/> </div> </div> ))} </div> </div> ))} </div> )
        };

        // --- Icon Library Component ---
        const IconLibrary = () => {
            const [iconSize, setIconSize] = React.useState(24);
            const [iconColor, setIconColor] = React.useState('#a1a1aa'); // Default to text-secondary
            return (
                <div className="bg-secondary p-6 rounded-lg border border-primary">
                    <div className="flex items-center gap-6 mb-4">
                        <div className="flex items-center gap-2">
                            <label htmlFor="icon-size" className="text-sm text-secondary">Size:</label>
                            <input type="range" id="icon-size" min="12" max="64" value={iconSize} onChange={e => setIconSize(e.target.value)} />
                            <span className="text-sm text-primary w-8">{iconSize}px</span>
                        </div>
                         <div className="flex items-center gap-2">
                            <label htmlFor="icon-color" className="text-sm text-secondary">Color:</label>
                            <input type="color" id="icon-color" value={iconColor} onChange={e => setIconColor(e.target.value)} className="w-8 h-8 p-0 border-none rounded cursor-pointer" style={{backgroundColor: 'transparent'}} />
                        </div>
                    </div>
                    <div className="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 gap-4">
                        {Object.keys(SVG_PATHS).map(name => (
                            <div key={name} className="flex flex-col items-center justify-center gap-2 p-2 bg-tertiary rounded-md aspect-square">
                                <Icon name={name} size={iconSize} color={iconColor} />
                                <span className="text-xs text-secondary truncate">{name}</span>
                            </div>
                        ))}
                    </div>
                </div>
            )
        }

        // --- Effects Sandbox ---
        const EffectsSandbox = () => {
            const [effects, setEffects] = React.useState({ transition: 'transition-all', shadow: 'shadow-md', hover: 'hover-lift' });
            const handleEffectChange = (type, value) => {
                setEffects(prev => ({ ...prev, [type]: value }));
            };
            const effectClasses = Object.values(effects).join(' ');

            return (
                 <div className="bg-secondary p-6 rounded-lg border border-primary">
                    <div className="flex flex-wrap gap-8">
                        {/* Preview Area */}
                        <div className="flex-grow flex items-center justify-center">
                            <div className={`w-32 h-32 bg-tertiary rounded-lg flex items-center justify-center text-secondary border border-secondary ${effectClasses}`}>
                                Hover Me
                            </div>
                        </div>
                        {/* Controls */}
                        <div className="flex flex-col gap-4">
                            <div>
                                <h4 className="text-sm font-medium text-secondary mb-2">Transition</h4>
                                <select onChange={e => handleEffectChange('transition', e.target.value)} value={effects.transition} className="w-full bg-tertiary p-1 rounded text-xs">
                                    <option value="transition-all">Default</option>
                                    <option value="">None</option>
                                </select>
                            </div>
                             <div>
                                <h4 className="text-sm font-medium text-secondary mb-2">Shadow</h4>
                                <select onChange={e => handleEffectChange('shadow', e.target.value)} value={effects.shadow} className="w-full bg-tertiary p-1 rounded text-xs">
                                    <option value="shadow-sm">Small</option>
                                    <option value="shadow-md">Medium</option>
                                    <option value="shadow-lg">Large</option>
                                    <option value="shadow-glow">Glow</option>
                                    <option value="">None</option>
                                </select>
                            </div>
                             <div>
                                <h4 className="text-sm font-medium text-secondary mb-2">Hover</h4>
                                <select onChange={e => handleEffectChange('hover', e.target.value)} value={effects.hover} className="w-full bg-tertiary p-1 rounded text-xs">
                                    <option value="hover-lift">Lift</option>
                                    <option value="hover-scale">Scale</option>
                                    <option value="">None</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            )
        }
        
        // --- Workbench App ---
        const App = () => {
            const [liveColors, setLiveColors] = React.useState(LIGHT_THEME_PRESET);
            const [font, setFont] = React.useState('intersans');

            React.useEffect(() => { const styleId = 'dynamic-theme-styles'; let styleElement = document.getElementById(styleId); if (!styleElement) { styleElement = document.createElement('style'); styleElement.id = styleId; document.head.appendChild(styleElement); } const cssText = `:root { ${Object.entries(liveColors).map(([key, value]) => `${key}: ${value};`).join(' ')} }`; styleElement.textContent = cssText; }, [liveColors]);
            // Inside App component
            React.useEffect(() => {
                // 1. Find all existing classes on the body that look like "font-..."
                const existingFontClasses = Array.from(document.body.classList)
                    .filter(className => className.startsWith('font-'));
                
                // 2. Remove them all at once
                if (existingFontClasses.length > 0) {
                    document.body.classList.remove(...existingFontClasses);
                }

                // 3. Add the new font class
                // Ensure your state 'font' matches your CSS class names (e.g., if class is .font-intersans, state should probably be 'intersans')
                document.body.classList.add(`font-${font}`); 
            }, [font]);
            
            const handleThemePresetChange = (themeName) => { setLiveColors(themeName === 'light' ? LIGHT_THEME_PRESET : DARK_THEME_PRESET); };
            const handleColorChange = (variableName, newValue) => { setLiveColors(prevColors => ({ ...prevColors, [variableName]: newValue })); };

            return (
                <div className="p-8">
                    <header className="flex justify-between items-start mb-10 pb-4 border-b border-primary">
                        <div> <h1 className="text-3xl font-bold">Component Workbench</h1> <p className="text-secondary mt-2">A frictionless environment to build and test UI components for Adaptive Engine.</p> </div>
                        <div className="flex flex-col gap-4"> <ThemeSwitcher onThemeChange={handleThemePresetChange} /> <FontSwitcher currentFont={font} onFontChange={setFont} /> </div>
                    </header>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 flex flex-col gap-8">
                             <section>
                                <h2 className="text-xl font-semibold mb-4 text-secondary">Button Component Showcase</h2>
                                <div className="bg-secondary p-6 rounded-lg border border-primary">
                                    <h3 className="text-lg font-medium mb-4">Actions</h3>
                                    <div className="flex flex-wrap items-center gap-4"> <Button action="save" text="Save" /> <Button action="delete" text="Delete" /> <Button action="edit" text="Edit" /> <Button action="generate" text="Generate" /> <Button action="close" text="Close" /> <Button action="undefined" text="Default" /> </div>
                                </div>
                            </section>
                            <section>
                                <h2 className="text-xl font-semibold mb-4 text-secondary">Icon Library</h2>
                                <IconLibrary />
                            </section>
                             <section>
                                <h2 className="text-xl font-semibold mb-4 text-secondary">Effects Sandbox</h2>
                                <EffectsSandbox />
                            </section>
                        </div>
                        <aside className="lg:col-span-1">
                            <h2 className="text-xl font-semibold mb-4 text-secondary">Live Theme Editor</h2>
                            <div className="sticky top-8">
                                <LiveThemeEditor colors={liveColors} onColorChange={handleColorChange} />
                            </div>
                        </aside>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>